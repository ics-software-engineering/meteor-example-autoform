{"name":"Meteor-example-autoform","tagline":"Simple Meteor app illustrating use of Bootstrap form controls.","body":"# meteor-example-autoform\r\n\r\n![](https://raw.githubusercontent.com/ics-software-engineering/meteor-example-autoform/master/doc/meteor-example-autoform.png)\r\n\r\nMeteor-example-autoform is a [Meteor](http://meteor.com) application that provides a simple implementation of an HTML form using the [AutoForm plugin](https://github.com/aldeed/meteor-autoform) along with [Twitter Bootstrap](http://getbootstrap.com/).\r\n\r\nI wrote this application to complement the AutoForm documentation and online AutoForm tutorials. Specifically, I wanted to provide example code for Radio Buttons, Checklists, and multiple selection.\r\n\r\nThe code also uses explicit publish and subscribe and Meteor methods.  This means the insecure and autopublish packages are not enabled.\r\n\r\nI previously wrote a similar application called [play-example-form](http://ics-software-engineering.github.io/play-example-form/) to illustrate form processing in the [Play Framework](https://www.playframework.com/). It's interesting to compare the two implementations.\r\n\r\n## Basic usage\r\n\r\nDownload the application and type `meteor`, then display [http://localhost:3000](http://localhost:3000) to bring up a window similar to the above.\r\n\r\nThe application consists of two pages: the home page that enables the form and enables you to create new StudentData documents, and a second page that allows you to edit a pre-existing StudentData document.  To use this second page, open up the browser console and submit a new StudentData instance. The form will be reset, and you should see the docID printed out to the console:\r\n\r\n![](https://raw.githubusercontent.com/ics-software-engineering/meteor-example-autoform/master/doc/meteor-example-autoform-submit.png)\r\n\r\nCopy the docID, and then create a URL in the address bar with `student/<docID>`.   Retrieving that URL will display the newly created StudentData document and allow it to be edited:\r\n\r\n![](https://raw.githubusercontent.com/ics-software-engineering/meteor-example-autoform/master/doc/meteor-example-autoform-student.png)\r\n\r\nOne way to test your understanding of this code is to clone this repo and augment the application to display a table of all created StudentData instances and an \"Edit\" button to display the selected student on the second page.\r\n\r\n## Walkthough\r\n\r\nLet's take a quick look through the code.\r\n\r\n### Routing\r\n\r\nThe application consists of two pages: a home page (which we'll call \"AddStudentData\") that enables you to create a new StudentData document, and a second page (which we'll call \"EditStudentData\") that enables you to edit a pre-existing StudentData document.\r\n\r\nBecause there are two pages, it makes sense to use a router.  This application uses [Iron Router](http://iron-meteor.github.io/iron-router/).\r\n\r\nThe routing code is in a single file: [lib/router/router.js](https://github.com/ics-software-engineering/meteor-example-autoform/blob/master/lib/router/router.js):\r\n\r\n  * A \"layout\" template is specified to provide boilerplate Bootstrap code, found in [client/templates/application/layout.html](https://github.com/ics-software-engineering/meteor-example-autoform/blob/master/client/templates/application/layout.html).\r\n\r\n  * When the application is first retrieved by a client, the router will subscribe to the StudentData collection. A [loading template](https://github.com/ics-software-engineering/meteor-example-autoform/blob/master/client/templates/application/loading.html) will be shown while the subscription runs, and this displays the spinner provided by [sasha:spinner](https://atmospherejs.com/sacha/spin).\r\n\r\n  * Two routes are defined: \"/\" which will display the AddStudentData template, and \"/student/:_id\" which will display the UpdateStudentData template.  Both templates are defined in [client/templates/studentdata/studentdata.html](https://github.com/ics-software-engineering/meteor-example-autoform/blob/master/client/templates/studentdata/studentdata.html).\r\n\r\n  * When the client submits a URL with the /student route, the next part of the path should provide the docID for the student to be retrieved. (No error checking is done. [Discover Meteor](https://www.discovermeteor.com/) has a nice tutorial on how to support error checking in Iron Router.)\r\n\r\n### The StudentData Collection\r\n\r\nA primary component of form definition occurs in [lib/collections/studentdata.js](https://github.com/ics-software-engineering/meteor-example-autoform/blob/master/lib/collections/StudentData.js) which contains the code to define the StudentData collection, the Meteor Methods for adding and updating StudentData documents, and the schema definition for StudentData documents.\r\n\r\nFor example, here is the schema definition for the \"Level\" field in a StudentData document:\r\n\r\n```\r\n  level: {\r\n    label: \"Level\",\r\n    type: String,\r\n    optional: false,\r\n    allowedValues: ['Freshman', 'Sophomore', 'Junior', 'Senior'],\r\n    autoform: {\r\n      group: studentData,\r\n      type: 'select-radio-inline'\r\n    }\r\n  }\r\n  ```\r\nThis schema definition indicates that:\r\n\r\n   * Level is a required field containing a String.\r\n   * Level has four allowed String values,\r\n   * AutoForm should display it inside a FieldSet with legend \"StudentData\"\r\n   * AutoForm should display it as an inline (horizontal) list of radio buttons.\r\n\r\nThe schema thus specifies both structural (i.e. the type of allowable value) and presentation (i.e. what HTML form control should be used).\r\n\r\nReview the other field definitions to see how to specify other form components.\r\n\r\n### Templates\r\n\r\nThe schema specifies most of the information required by AutoForm for this example application.   The two templates in  [client/templates/studentdata/studentdata.html](https://github.com/ics-software-engineering/meteor-example-autoform/blob/master/client/templates/studentdata/studentdata.html) are quite simple. Here is one:\r\n\r\n```\r\n<template name=\"AddStudentData\">\r\n  <div class=\"well\">\r\n    {{> quickForm\r\n    collection=\"StudentData\"\r\n    template=\"bootstrap3-horizontal\"\r\n    label-class=\"col-sm-2\"\r\n    input-col-class=\"col-sm-10\"\r\n\r\n    id=\"AddStudentDataForm\"\r\n    type=\"method\"\r\n    meteormethod=\"addStudentData\"\r\n    resetOnSuccess=true}}\r\n  </div>\r\n</template>\r\n```\r\n\r\nFor this application, we can use [quickForm](https://github.com/aldeed/meteor-autoform#quickform), the most simple of AutoForm's options. We specify the Collection (which provides AutoForm with access to the Schema), and some Twitter Bootstrap layout information (a horizontal form layout and column width information). We indicate that we want to use Meteor methods and which method to invoke.\r\n\r\n### Issues: Form Help Text\r\n\r\nWith one exception, the implementation of this form in Meteor using AutoForm was quite straightforward.\r\n\r\nThe exception is this: I originally hoped to replicate the following form from play-example-form:\r\n\r\n![](https://raw.githubusercontent.com/ics-software-engineering/play-example-form/master/doc/play-example-form-homepage.png)\r\n\r\nUnlike the Meteor version, play-example-form provides [help text](http://getbootstrap.com/css/#forms-help-text) (the grey text underneath each form control documenting how the user should respond).\r\n\r\nAs far as I can tell, providing help text in AutoForm is not possible with [quickForm component](https://github.com/aldeed/meteor-autoform#quickform), nor is it even possible with the [autoForm component](https://github.com/aldeed/meteor-autoform#autoform-1), which provides fine-grained control over individual fields.\r\n\r\nInstead, in order to obtain this very common and highly useful UI element, you must apparently define a [theme template](https://github.com/aldeed/meteor-autoform#theme-templates), which will differ in only minor ways from the built-in one.\r\n\r\nFor the novice user of AutoForm who requires help-text, a legitimate question becomes whether it is better to fork a predefined template and implement this feature, or just abandon AutoForm entirely and roll one's own form processor.\r\n\r\nI believe the AutoForm package significantly simplifies form development, and that it is a design oversight to require developers who merely wish to include form help text to learn an advanced AutoForm mechanism to achieve it (and then manually maintain their copy of the template as Bootstrap and AutoForm evolve over time.)   A much better solution is for the AutoForm developers to include a help-text option in the Schema that can be used by the predefined templates:\r\n\r\n```\r\n  level: {\r\n    label: \"Level\",\r\n    type: String,\r\n    optional: false,\r\n    allowedValues: ['Freshman', 'Sophomore', 'Junior', 'Senior'],\r\n    autoform: {\r\n      group: studentData,\r\n      type: 'select-radio-inline',\r\n      help-text: 'Select your grade level. (required)'\r\n    }\r\n  }\r\n```\r\n\r\nWith this simple enhancement, users requiring help text could enjoy the simplicity of the quickForm option.\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}